# Language

So far, we can compose and render scenes by directly writing them in Java, instancing `Scene` and `Entity` objects. But for the user to compose his own scenes, we need to define a language: the CRT scripting language.

...

- Imperative, no objects
- Procedures with parameters, no functions
- Variables can store entities
- Nesting scopes
- Modifiers

## ANTLR4

\customfig{uml/antlr.eps}{Classes generated by ANTLR4}{}

## Grammar

## Compiling process

``` { .haskell .numberLines } 
set title  = "Example 01"
set author = "Tenchi (tenchi@team2xh.net)"
set date   = "08.06.2014"
set notes  = "Sample CRT scene in TRC language,"
             "language specification exploration."

# Sample camera
let cam = Camera(position -> vec3 (0.0, 0.5, -0.5),
                 pointing -> vec3 (0.0, 0.0, 0.0))

let redLight = Light
(
    position -> vec3 (1.0, 1.0, 1.0),
    color    -> rgb  (1.0, 0.9, 0.8)
)

let box1 = Box
(
    corner1 -> vec3 (-0.2, 0.0, -0.2),
    corner2 -> vec3 (0.2, 0.4, 0.2),
    color   -> rgb  (0.5, 0.5, 0.5)
)

let sphere1 = Sphere
(
    origin -> vec3 (0.0, 0.4, 0.0),
    radius -> 0.2
)

let tub = box1 - sphere1

# Ground
let plane1 = Plane
(
    normal   -> vec3 (0.0, 1.0, 0.0),
    position -> vec3 (0.0, 0.0, 0.0)
)

set settings = Settings
(
    gamma      -> 1.0,
    background -> rgb (1.0, 1.0, 1.0),
    camera     -> cam,
    lights     -> [redLight, blueLight]
)

scene {
    box1 <scale 3.0> - sphere1 <scale vec3 (1.0, 1.0, 2.0)>,
    tub <scale 2.0, translate vec3 (1.0, 0.0, 1.0)>
}
```